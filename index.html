<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>OpenStreetMap &amp; OpenLayers - Marker Example</title>
<style>
#map {
        width: 600px;
        height: 350px;
      }
input[type="text"] {
  width:400px;
}
</style>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<link rel="stylesheet" href="https://openlayers.org/en/v4.6.5/css/ol.css" type="text/css">
	<script src="https://openlayers.org/en/v4.6.5/build/ol.js" type="text/javascript"></script>
  <link rel="stylesheet" href="http://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
  <link rel="stylesheet" href="http://resources/demos/style.css">
  <script src="https://code.jquery.com/jquery-1.12.4.js" ></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script type="text/javascript" src='index.js'> </script>
  <script>
  $( function() {
    $( "#slider-range" ).slider({
      range: true,
      min: 1880,
      max: 2017,
      values: [ 1900, 2000 ],
      slide: function( event, ui ) {
        $( "#amount" ).val(ui.values[ 0 ] + "-" + ui.values[ 1 ] ); add_map_point(31.2631254 ,34.802250941657);add_map_point(31.8110615 ,34.7816055);remove_all_points();
      }
    });
    $( "#amount" ).val($( "#slider-range" ).slider( "values", 0 ) +"-"+
      $( "#slider-range" ).slider( "values", 1 ) ); 
  } );
  </script>
  <script>
function remove_all_points() {

    var features = map.getLayers();
	var i = 1;
    features.forEach((feature) =>{
	if(i==features.getLength()){
	 return;
	}
        features.pop().getSource().clear();
    });
}
/* OSM & OL example code provided by https://mediarealm.com.au/ */
jQuery.getJSON("data.json");
console.log("asa");
var map;
var last;
var vectorLayer
var mapLat = 31.8110615;
var mapLng = 34.7816055;
var mapDefaultZoom = 7.5;
function initialize_map() {
map = new ol.Map({
target: "map",
layers: [
new ol.layer.Tile({
source: new ol.source.OSM({
url: "https://a.tile.openstreetmap.org/{z}/{x}/{y}.png"
})
})
],
view: new ol.View({
center: ol.proj.fromLonLat([mapLng, mapLat]),
zoom: mapDefaultZoom
})
});
}
function add_map_point(lat, lng) {
vectorLayer = new ol.layer.Vector({
source:new ol.source.Vector({
features: [new ol.Feature({
geometry: new ol.geom.Point(ol.proj.transform([parseFloat(lng), parseFloat(lat)], 'EPSG:4326', 'EPSG:3857')),
})]
}),
style: new ol.style.Style({
image: new ol.style.Icon({
anchor: [0.5, 0.5],
anchorXUnits: "fraction",
anchorYUnits: "fraction",
src: "https://upload.wikimedia.org/wikipedia/commons/e/ec/RedDot.svg"
})
})
});

map.addLayer(vectorLayer);
}
  </script>
  <script type="text/javascript" charset="utf-8">
    $.get(
    "data.json",
    {paramOne : 1, paramX : 'abc'},
    function(data) {
       alert('page content: jjj' + JSON.stringify(data));
    }
);
</script>
</head>
<body onload="initialize_map();add_map_point(31.68989 ,34.89898);">
  <div id="map" style="width: 1200px; height: 650px;"></div>
<p>
  <label for="amount">טווח שנים:</label>
  <input type="text" id="amount" readonly style="border:0; color:#f6931f; font-weight:bold; width:350px">
</p>
<div id="slider-range"></div>
</body>
</html>
